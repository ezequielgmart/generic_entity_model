# `SingleEntityModel` Class

---

The `SingleEntityModel` class **extends `SingleModelQueries`** and serves as the primary interface for performing **CRUD (Create, Read, Update, Delete) operations** on a single database table. It acts as a generic repository or data access object, abstracting the direct interaction with SQL queries and the database connection pool.

## Purpose

`SingleEntityModel` is designed to:

* **Execute generated SQL queries**: It takes the SQL strings generated by `SingleModelQueries` and executes them against the PostgreSQL database.
* **Manage database connections**: It handles acquiring and releasing database clients from the connection pool, ensuring efficient resource utilization.
* **Provide a high-level API for CRUD**: It offers simple `insert`, `select`, `update`, and `delete` methods, allowing developers to interact with database records without writing raw SQL.
* **Handle common database errors**: It includes basic error handling, specifically for unique constraint violations.

## Usage

To use `SingleEntityModel`, you typically instantiate it with details about the table you want to interact with, along with a function to retrieve your database connection pool.

```javascript
import { SingleEntityModel, getPool } from './path/to/db'; // Assuming getPool is exported from your db.js

// Define your schema (example for an 'authors' table)
const authorSchemaFields = [
    { name: 'author_id', main_key: true }, // Mark the primary key
    { name: 'first_name' },
    { name: 'last_name' },
    { name: 'nationality' }
];

// Instantiate the model for the 'authors' table
const AuthorModel = new SingleEntityModel(
    getPool,          // Function to get the database pool
    'authors',        // Table name
    'author',         // Table alias
    authorSchemaFields// Array of field definitions
);

// Now you can use AuthorModel to perform operations:
// const newAuthor = await AuthorModel.insert({
//     author_id: 'some-uuid',
//     first_name: 'Jane',
//     last_name: 'Doe',
//     nationality: 'Canadian'
// });
// const allAuthors = await AuthorModel.select();
// const authorById = await AuthorModel.selectbyMkId('some-uuid');
// await AuthorModel.update({
//     author_id: 'some-uuid',
//     first_name: 'Janet',
//     last_name: 'Doe'
// });
// await AuthorModel.delete('some-uuid');